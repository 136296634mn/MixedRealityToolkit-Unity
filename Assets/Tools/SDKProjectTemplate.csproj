<Project>
  <PropertyGroup>
    <!--TODO: This is a weird thing, it is a required property (even if commented)-->
    <!--<TargetFrameworks>netstandard2.0;uap10.0;net46</TargetFrameworks> -->
    
    <ProjectGuid><!--PROJECT_GUID_TOKEN--></ProjectGuid>
    <AllowUnsafeBlocks><!--ALLOW_UNSAFE_TOKEN--></AllowUnsafeBlocks>
    <LangVersion><!--LANGUAGE_VERSION--></LangVersion>
    
    <DevelopmentBuild><!--DEVELOPMENT_BUILD--></DevelopmentBuild>
	  <DefineConstants><!--COMMON_DEFINE_CONSTANTS--></DefineConstants>
    
    <RelativeBuildFolder><!--OUTPUT_PATH_TOKEN--></RelativeBuildFolder>
    <IsEditorOnlyTarget><!--IS_EDITOR_ONLY_TARGET_TOKEN--></IsEditorOnlyTarget>
    <UnityEditorInstallFolder><!--UNITY_EDITOR_INSTALL_FOLDER--></UnityEditorInstallFolder>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(Platform)' == ''">
    <Platform><!--DEFAULT_PLATFORM_TOKEN--></Platform>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(Configuration)' == ''">
    <Configuration>InEditor</Configuration>
  </PropertyGroup>
  
  <PropertyGroup>
    <Configurations>InEditor;Player</Configurations>
    <Platforms><!--SUPPORTED_PLATFORMS_TOKEN--></Platforms>
    <UnityPlatform>$(Platform)</UnityPlatform>
    <UnityConfiguration>$(Configuration)</UnityConfiguration>
  </PropertyGroup>

  <!-- This is special cased here for WSA player only-->
  <PropertyGroup>
    <BaseIntermediateOutputPath>$(MSBuildThisFileDirectory)$(RelativeBuildFolder)\obj\$(UnityConfiguration)\$(UnityPlatform)\$(ProjectGuid)\</BaseIntermediateOutputPath>
    <IntermediateOutputPath>$(BaseIntermediateOutputPath)</IntermediateOutputPath>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(UnityConfiguration)|$(UnityPlatform)' == 'Player|WSA'">
    <OutputPath>$(MSBuildThisFileDirectory)$(RelativeBuildFolder)\$(UnityConfiguration)\$(UnityPlatform)\</OutputPath>
    <OutDir>$(OutputPath)</OutDir>
  </PropertyGroup>
  <PropertyGroup Condition="'$(UnityConfiguration)|$(UnityPlatform)' != 'Player|WSA'">
    <OutputPath>$(MSBuildThisFileDirectory)$(RelativeBuildFolder)\$(UnityConfiguration)\$(UnityPlatform)\$(MSBuildProjectName)\</OutputPath>
    <OutDir>$(OutputPath)</OutDir>
  </PropertyGroup>

  <!--IMPORT SDK.props manually to be able to set the BaseIntermediateOutputPath above path-->
  <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />

  <Import Project="##PLATFORM_PROPS_FOLDER_PATH_TOKEN##\$(UnityPlatform).$(UnityConfiguration).props"/>

  <!-- This is a "special" platform that will override references -->
  <Import Project="##PLATFORM_PROPS_FOLDER_PATH_TOKEN##\Editor.InEditor.props" Condition="'$(IsEditorOnlyTarget)' == 'true'"/>

  <PropertyGroup Condition="'$(UnityConfiguration)'=='InEditor'">
    <AssemblySearchPaths>$(AssemblySearchPaths);<!--COMMON_ASSEMBLY_SEARCH_PATHS_TOKEN-->;<!--INEDITOR_ASSEMBLY_SEARCH_PATHS_TOKEN--></AssemblySearchPaths>
    <DevelopmentBuild>true</DevelopmentBuild>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(UnityConfiguration)'=='Player'">
    <AssemblySearchPaths>$(AssemblySearchPaths);<!--COMMON_ASSEMBLY_SEARCH_PATHS_TOKEN-->;<!--PLAYER_ASSEMBLY_SEARCH_PATHS_TOKEN--></AssemblySearchPaths>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(DevelopmentBuild)'=='true'">
    <DefineConstants>$(DefineConstants);<!--COMMON_DEVELOPMENT_DEFINE_CONSTANTS--></DefineConstants>
    <AssemblySearchPaths>$(AssemblySearchPaths);<!--DEVELOPMENT_ASSEMBLY_SEARCH_PATHS_TOKEN--></AssemblySearchPaths>
  </PropertyGroup>
  
  <PropertyGroup>
    <DefaultItemExcludes>$(DefaultItemExcludes)obj;bin;*.asmdef;*.asmdef.meta;<!--FOLDER_EXCLUDE_TOKEN--></DefaultItemExcludes>
  </PropertyGroup>

  <!--COMMON REFERENCES-->
  <ItemGroup>
    <!--COMMON_REFERENCE_TEMPLATE_START-->
    <Reference Include="##REFERENCE_TOKEN##">
      <HintPath><!--HINT_PATH_TOKEN--></HintPath>
    </Reference>
    <!--COMMON_REFERENCE_TEMPLATE_END-->
  </ItemGroup>

  <ItemGroup Condition="'$(DevelopmentBuild)'=='true'">
    <!--DEVELOPMENT_REFERENCE_TEMPLATE_START-->
    <Reference Include="##REFERENCE_TOKEN##">
      <HintPath><!--HINT_PATH_TOKEN--></HintPath>
    </Reference>
    <!--DEVELOPMENT_REFERENCE_TEMPLATE_END-->
  </ItemGroup>

  <!--PROJECT_REFERENCE_SET_TEMPLATE_START-->
  <ItemGroup Condition="'$(UnityConfiguration)'=='##REFERENCE_CONFIGURATION_TOKEN##'">
<!--PROJECT_REFERENCE_TEMPLATE_START-->
    <ProjectReference Include="##REFERENCE_TOKEN##" Condition="##CONDITION_TOKEN##">
      <PrivateAssets>All</PrivateAssets>
    </ProjectReference>
<!--PROJECT_REFERENCE_TEMPLATE_END-->
    
<!--PLUGIN_REFERENCE_TEMPLATE_START-->
    <Reference Include="##REFERENCE_TOKEN##" Condition="##CONDITION_TOKEN##">
      <HintPath><!--HINT_PATH_TOKEN--></HintPath>
    </Reference>
<!--PLUGIN_REFERENCE_TEMPLATE_END-->
  </ItemGroup>
<!--PROJECT_REFERENCE_SET_TEMPLATE_END-->
  
  <ItemGroup>
<!--SOURCE_INCLUDE_TEMPLATE_START--><Compile Include="##RELATIVE_SOURCE_PATH##" Link="##PROJECT_LINK_PATH##" /><!--SOURCE_INCLUDE_TEMPLATE_END-->
  </ItemGroup>
  
  <!--IMPORT SDK.targets-->
  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />

  <!--We control whether we build the project this way, depending on the platform/configuration-->
  <PropertyGroup>
    <OriginalBuildDependsOn>$(BuildDependsOn)</OriginalBuildDependsOn>
    <BuildDependsOn></BuildDependsOn>
  </PropertyGroup>
  
  <Target Name="OriginalBuild" DependsOnTargets="$(OriginalBuildDependsOn)">
  </Target>

  <Target Name="SetPlatformProperty">
    <CreateProperty Value="AnyCPU">
      <Output TaskParameter="Value" PropertyName="Platform"/>
    </CreateProperty>
  </Target>
  
  <Target Name="Build" DependsOnTargets="$(BuildDependsOn)">
    <CallTarget Targets="SetPlatformProperty"/>
<!--SUPPORTED_PLATFORM_BUILD_CONDITION_TEMPLATE_START-->
    <CallTarget Targets="OriginalBuild" Condition="'$(UnityConfiguration)|$(UnityPlatform)'=='##SUPPORTED_CONFIGURATION_TOKEN##|##SUPPORTED_PLATFORM_TOKEN##'"/>
<!--SUPPORTED_PLATFORM_BUILD_CONDITION_TEMPLATE_END-->
  </Target>

</Project>
